var Element={};Element=function(){"use strict";var e=[],t={},n="element-form",r="element-model",i=null,s=function(){var n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r];if(!s.name)continue;n.push({name:s.name,value:s.value(),type:s.type,validationStatus:s.validator.status,validationMessage:s.validator.message})}$.extend(t,n)},o=function(e){if(!e.name)return;for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e.name===i.name){e.val(i.value),e.validator&&(e.validator.status=i.status,e.validator.message=i.validator.message);return}}};return{init:function(e){e.formId&&(n=e.formId),e.modelName&&(r=e.modelName),e.defaultValidationRenderer&&(i=e.defaultValidationRenderer);var s=$("#"+n+" input[name='"+r+"']");s&&(t=JSON.parse(s.val()))},validate:function(){var t=!0;for(var n=0;n<e.length;n++)e[n].validator&&(t&=e[n].validate());return t},getModel:function(){return s(),t},create:function(t){var n=$.extend({},Element.HtmlElement,t);e.push(n);if(n.listeners){n.listeners instanceof Array||(n.listeners=[n.listeners]);for(var r=0,s=n.listeners.length;r<s;r++){var u=n.listeners[r];u.element=n,n.registerListener(u)}}return n.validator&&(n.validator.element=n,n.registerValidator(n.validator),n.validationRenderer?n.validator.validationRenderer=n.validationRenderer:i?n.validationRenderer=$.extend({},i):(i=Element.ValidationRenderer,n.validationRenderer=$.extend({},i)),n.validator.validationRenderer=n.validationRenderer,n.validationRenderer.validator=n.validator),o(n),n.init&&n.init(),n},validator:function(e,t){return t||(t=Element.Validator),$.extend({},t,e)},VALID:"valid",ERROR:"error",WARNING:"warning",CANCELLED:"cancelled",VALIDATING:"validating"}}(),Element.HtmlElement=function(){"use strict";var e=function(e,t,n){n instanceof Array||(n=[n]);for(var r=0,i=n.length;r<i;r++){var s=n[r];s==="enterkey"?e.el().on("keypress",function(n){n.which===13&&t.call(e,n)}):e.el().on(n[r],e,t)}};return{el:function(){if(this.id)return $("#"+this.id);if(this.name)return $("#"+this.name);console.error("Error getting element target. No id or a name property has been defined!")},value:function(e){if(typeof e=="undefined")return this.el().val();this.el().val(e)},registerListener:function(t){this.listeners||(this.listeners=[]),this.listeners.push(t),e(this,t.callback,t.events)},registerValidator:function(t){this.validator=t,e(this,function(){t.validate()},t.events)},validate:function(){return this.validator.validate()},clearValidation:function(){this.validator.validationRenderer.clearValidation()},isValid:function(){return this.validator.isSuccess()},isError:function(){return this.validator.isError()},isWarning:function(){return this.validator.isWarning()},isCancelled:function(){return this.validator.isCancelled()},isValidating:function(){return this.validator.isValidating()}}}(),Element.Validator={validate:function(){var e=!1;return this.preValidationHandler&&(e=this.preValidationHandler(),e&&(this.status=Element.CANCELLED)),e||(this.doValidation(),this.postValidationHandler&&this.postValidationHandler(),this.validationRenderer.updateView()),Element.VALID===this.status},result:function(e,t){this.status=e,this.message=t},isValid:function(){return this.status===Element.VALID},isError:function(){return this.status===Element.ERROR},isWarning:function(){return this.status===Element.WARNING},isCancelled:function(){return this.status===Element.CANCELLED},isValidating:function(){return this.status===Element.VALIDATING}},Element.RequiredValidator=Element.validator({events:"focusout",errorMessage:"This field is required.",doValidation:function(){this.element.value()?this.result(Element.VALID):this.result(Element.ERROR,this.errorMessage)}}),Element.ValidationRenderer={validator:null,updateView:function(){this.clearValidation(),this.validator.isError()?this.addValidation("has-error","glyphicon glyphicon-remove"):this.validator.isWarning()?this.addValidation("has-warning","glyphicon glyphicon-alert"):this.validator.isValid()?this.addValidation("has-success","glyphicon glyphicon-ok"):this.validator.isValidating()&&this.addValidation("","glyphicon glyphicon-cog right-spinner")},formGroup:function(){return this.el().closest(".form-group")},el:function(){return this.validator.element.el()},addValidation:function(e,t){this.formGroup().addClass("has-feedback "+e);var n=this.el();n.after("<span class='"+t+" form-control-feedback'></span>"),this.validator.message&&n.after("<div class='help-block input-msg'>"+this.validator.message+"</div>")},clearValidation:function(){var e=this.formGroup();e.removeClass("has-feedback has-error has-success has-warning"),e.find(".form-control-feedback").remove(),e.find(".input-msg").remove()}}